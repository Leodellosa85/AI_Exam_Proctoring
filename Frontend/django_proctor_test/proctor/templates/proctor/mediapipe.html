{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Proctoring - Secure Session</title>

    <style>
        body { font-family: Arial, sans-serif; margin: 18px; }
        #video-container { position: relative; width: 640px; height: 480px; background: #000; border-radius: 8px; }
        video { width: 100%; height: 100%; display: block; border-radius: 6px; }
        #overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        #controls { margin-bottom: 12px; }
        #status-box { margin-top: 10px; padding: 8px; background: #f7f7f7; border: 1px solid #ddd; border-radius: 6px; width: 640px; }
        #mp-panel { margin-top: 10px; padding: 10px; background: #111; color: #0f0; font-family: monospace; white-space: pre; max-height: 240px; overflow: auto; border-radius: 6px; width: 640px; }
    </style>
</head>
<body>

<h2>Proctoring Session</h2>

<div id="controls">
    <button id="startBtn">Start Exam</button>
    <button id="endBtn" disabled>End Exam</button>
    <span id="sessionInfo" style="margin-left:12px;"></span>
</div>

<div id="video-container">
    <video id="video" autoplay playsinline muted></video>
    <canvas id="overlay"></canvas>
</div>

<div id="status-box">
    <strong>System Logs:</strong>
    <pre id="status">Disconnected</pre>
</div>

<!-- MediaPipe values panel (frontend test area) -->
<div id="mp-panel">MP values will appear here after initialization...</div>

<!-- Load MediaPipe tasks-vision runtime (required globally before proctoring.js) -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3" crossorigin="anonymous"></script>

<!-- Application script tag: proctoring.js reads these data-* attributes -->
<script 
    id="proctor-script"
    src="{% static 'js/proctoring.js' %}" 
    type="module"
    data-model-path="{% static 'models/face_landmarker.task' %}"
    data-wasm-path="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.3/wasm"
    data-ws-url="ws://127.0.0.1:8001/ws/v1/ws/{sessionId}"
></script>

</body>
</html>
